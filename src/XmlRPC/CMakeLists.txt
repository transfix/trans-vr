cmake_minimum_required(VERSION 3.16)

FILE(GLOB SOURCE_FILES *.cpp)
FILE(GLOB INCLUDE_FILES ../../inc/XmlRPC/*.[Hh])

SOURCE_GROUP("Source Files" FILES ${SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${INCLUDE_FILES})

INCLUDE_DIRECTORIES(
  ../../inc
)

IF(CMAKE_SYSTEM_NAME STREQUAL "Linux")
  ADD_DEFINITIONS(-D__LINUX__)
ENDIF(CMAKE_SYSTEM_NAME STREQUAL "Linux")

IF(CMAKE_SYSTEM_NAME STREQUAL "Windows")
  ADD_DEFINITIONS(-D__WIN32__ -D__WINDOWS__ -D_WINDOWS)
ENDIF(CMAKE_SYSTEM_NAME STREQUAL "Windows")

IF(CMAKE_SYSTEM_NAME MATCHES ".*BSD")
  ADD_DEFINITIONS(-D__BSD__)
ENDIF(CMAKE_SYSTEM_NAME MATCHES ".*BSD")

ADD_LIBRARY (XmlRPC STATIC ${SOURCE_FILES} ${INCLUDE_FILES})

set_target_properties(XmlRPC PROPERTIES
  AUTOMOC OFF
  AUTOUIC OFF
  AUTORCC OFF
)

#Windows requires wsock32
if(WIN32)
  target_link_libraries(XmlRPC wsock32)
endif(WIN32)
